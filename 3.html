<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>IELTS - Writing</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <link rel="stylesheet" href="./main.css">

    <style>
        .form-check-input:focus {
          border-color: #86b7fe;
          outline: 0;
          box-shadow: none;
        }
    </style>


    <style>
        .highlight {
            background-color: yellow; /* Highlight color */
        }

        /* Context menu styling */
        #contextMenu {
            position: absolute;
            background-color: white;
            border: 1px solid #ccc;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);
            padding: 5px;
            display: none;
        }

        #contextMenu button {
            display: block;
            width: 100%;
            padding: 5px;
            text-align: left;
            border: none;
            background: none;
            cursor: pointer;
        }

        #contextMenu button:hover {
            background-color: #f0f0f0;
        }

        /* Notes section styling */
        #notesSection {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
        }

        #notesSection h3 {
            margin-top: 0;
        }

        .note {
            margin-bottom: 10px;
            padding: 10px;
            border: 1px solid #ddd;
            background-color: #fff;
        }

        .note .note-text {
            font-weight: bold;
            margin-bottom: 10px;
        }

        .note .comment-input {
            width: 100%;
            padding: 5px;
            margin-bottom: 5px;
            border: 1px solid #ccc;
        }

        .note .comment-button {
            padding: 5px 10px;
            background-color: #007bff;
            color: white;
            border: none;
            cursor: pointer;
        }

        .note .comment-button:hover {
            background-color: #0056b3;
        }

        .note .comments {
            margin-top: 10px;
        }

        .note .comment {
            padding: 5px;
            border-bottom: 1px solid #eee;
            background-color: #ffffffb7;
        }
    </style>


  </head>
  <body class="">
      
    <!-- Context menu for highlight, clear, and take note options -->
    <div id="contextMenu">
        <button onclick="highlightSelectedText()">Highlight</button>
        <button onclick="clearHighlight()">Clear</button>
        <button onclick="clearAllHighlights()">Clear All</button>
        <button onclick="takeNote()">Take Note</button>
    </div>
    
    <form action="{{url('free-mock-test-writing-store2')}}" method="post"> @csrf
    <input type="hidden" name="email" value="{{ session('mocktest.email') }}">

    <section class="" style="background-color: rgb(255, 221, 221); border-bottom: 1px solid black;">
      <div class="container-fluid">

        <div class="row align-items-center py-2">
          <div class="col-md-6">
            <span class="fw-bold">{{ session('mocktest.name') }}</span> <br>
            60 minuties remaining
          </div>
          <div class="col-md-6">
            <div class="d-flex justify-content-end"> 
              <button type="submit" class="btn btn-outline-dark">Finish test</button>
              <i class="bi bi-wifi fs-3 ps-3"></i>
              <i class="bi bi-bell fs-3 ps-3"></i>
              <i class="bi bi-list fs-3 ps-3"></i>
              <i class="bi bi-pencil-square fs-3 ps-3"></i>
            </div>
          </div>
        </div>

      </div>
    </section>

    <section>
        <div class="container py-3">
            <div class="row">

                <div class="col-12">

                    <div class="tab-content" id="pills-tabContent">

                        <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab" tabindex="0">
                          <div class="row">
                            <div class="col-12 mb-3">
                                <div class="card p-3 shadow-sm">
                                    <h3>Part 1</h3>
                                    <p class="mb-0">You should spend about 20 minutes on this task. Write at least 150 words.</p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card p-3 shadow-sm" style="height:300px;overflow:auto;">
                                    <h5 class="mb-3">The table below shows how the UK unemployed spent their time last year.</h5>
                                    <h5 class="mb-3">Summarise the information by selecting and reporting the main features, and make comparisons where relevant.</h5>
                                    <img class=""img-fluid src="https://cdielts.gelielts.com/img/table.png" alt="image">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card p-3 shadow-sm" style="height:300px;overflow:auto;">
                                    <textarea name="answer1" id="answer1" class="form-control mt-2" cols="33" rows="10" placeholder="Write here ..."></textarea>
                                </div>
                            </div>
                          </div>
                        </div>

                        <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab" tabindex="0">
                          <div class="row">
                            <div class="col-12 mb-3">
                                <div class="card p-3 shadow-sm">
                                    <h3>Part 2</h3>
                                    <p class="mb-0">You should spend about 40 minutes on this task. Write at least 250 words.</p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card p-3 shadow-sm" style="height:300px;overflow:auto;">
                                    <p class="mb-3">Write about the following topic:</p>
                                    <h5 class="mb-3">Some people argue that all experimentation on animals is bad and should be outlawed.</h5>
                                    <h5 class="mb-3">However, others believe that important scientific discoveries can be made from animal experiments.</h5>
                                    <h5 class="mb-3">Can experimentation on animals be justified? Are there any alternatives?</h5>
                                    <p>Give reasons for your answer and include any relevant examples from your own knowledge and experience.</p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card p-3 shadow-sm" style="height:300px;overflow:auto;">
                                    <textarea name="answer2" id="answer2" class="form-control mt-2" cols="33" rows="10" placeholder="Write here ..."></textarea>
                                </div>
                            </div>
                          </div> 
                        </div>

                    </div>

                    <ul class="nav nav-pills mt-2 d-flex justify-content-around" id="pills-tab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" style="border:2px solid #0D6EFD;" id="pills-home-tab" data-bs-toggle="pill" data-bs-target="#pills-home" type="button" role="tab" aria-controls="pills-home" aria-selected="true">Part 1</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" style="border:2px solid #0D6EFD;" id="pills-profile-tab" data-bs-toggle="pill" data-bs-target="#pills-profile" type="button" role="tab" aria-controls="pills-profile" aria-selected="false">Part 2</button>
                        </li>
                    </ul>

                </div>

            </div>
        </div>
    </section>

    </form>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  
    <script>
      // Select all buttons
      const buttons = document.querySelectorAll('.btnActive');

      // Add event listeners to each button
      buttons.forEach(button => {
          button.addEventListener('click', function () {
              // Reset all buttons to default outline style
              buttons.forEach(btn => {
                  btn.classList.remove('btn-primary');          // Remove active style
                  btn.classList.add('btn-outline-primary');     // Add default style
              });

              // Set the clicked button as active
              this.classList.remove('btn-outline-primary');      // Remove default style
              this.classList.add('btn-primary');                 // Add active style
          });
      });
  </script>
  
  
  
    <script>
        let selectedText = null; // Store the selected text range

        // Function to highlight the selected text
        function highlightSelectedText() {
            if (!selectedText) {
                alert("Please select a word or phrase to highlight.");
                return;
            }

            // Create a span element to wrap the selected text
            const span = document.createElement("span");
            span.className = "highlight";
            selectedText.surroundContents(span); // Wrap the selected text in the span

            // Clear the selection
            window.getSelection().removeAllRanges();
            hideContextMenu();
        }

        // Function to show the context menu on right-click
        function showContextMenu(event) {
            const selection = window.getSelection();
            if (selection.toString().trim() !== "") {
                event.preventDefault(); // Prevent the default context menu
                selectedText = selection.getRangeAt(0); // Store the selected text range

                // Position the context menu at the mouse pointer
                const contextMenu = document.getElementById("contextMenu");
                contextMenu.style.display = "block";
                contextMenu.style.left = `${event.pageX}px`;
                contextMenu.style.top = `${event.pageY}px`;
            }
        }

        // Function to hide the context menu
        function hideContextMenu() {
            const contextMenu = document.getElementById("contextMenu");
            contextMenu.style.display = "none";
        }

        // Function to clear the clicked highlight
        function clearHighlight() {
            const selection = window.getSelection();
            if (selection.rangeCount > 0) {
                const range = selection.getRangeAt(0);
                const span = range.startContainer.parentElement;
                if (span.classList.contains("highlight")) {
                    const text = span.innerText;
                    span.replaceWith(text); // Replace the span with its text
                }
            }
            hideContextMenu();
        }

        // Function to clear all highlights
        function clearAllHighlights() {
            const highlightedSpans = document.querySelectorAll(".highlight");
            highlightedSpans.forEach(span => {
                const text = span.innerText;
                span.replaceWith(text); // Replace each span with its text
            });
            hideContextMenu();
        }

        // Function to take a note of the selected text
        function takeNote() {
            if (!selectedText) {
                alert("Please select a word or phrase to take a note.");
                return;
            }

            const selectedContent = selectedText.toString().trim();
            if (selectedContent === "") {
                alert("No text selected to take a note.");
                return;
            }

            // Create a new note element
            const noteElement = document.createElement("div");
            noteElement.className = "note";

            // Add the selected text to the note
            const noteText = document.createElement("div");
            noteText.className = "note-text";
            noteText.textContent = selectedContent;
            noteElement.appendChild(noteText);

            // Add a comment input field
            const commentInput = document.createElement("input");
            commentInput.type = "text";
            commentInput.className = "comment-input";
            commentInput.placeholder = "Add a comment...";
            noteElement.appendChild(commentInput);

            // Add a button to submit the comment
            const commentButton = document.createElement("button");
            commentButton.className = "comment-button";
            commentButton.textContent = "Add Comment";
            commentButton.onclick = function () {
                addComment(noteElement, commentInput.value);
                commentInput.value = ""; // Clear the input field
            };
            noteElement.appendChild(commentButton);

            // Add a comments container
            const commentsContainer = document.createElement("div");
            commentsContainer.className = "comments";
            noteElement.appendChild(commentsContainer);

            // Add the note to the notes list
            const notesList = document.getElementById("notesList");
            notesList.appendChild(noteElement);

            // Clear the selection and hide the context menu
            window.getSelection().removeAllRanges();
            hideContextMenu();
        }

        // Function to add a comment to a note
        function addComment(noteElement, commentText) {
            if (commentText.trim() === "") {
                alert("Please enter a comment.");
                return;
            }

            const commentsContainer = noteElement.querySelector(".comments");

            // Create a new comment element
            const commentElement = document.createElement("div");
            commentElement.className = "comment";
            commentElement.textContent = commentText;

            // Add the comment to the comments container
            commentsContainer.appendChild(commentElement);
        }

        // Event listeners
        document.addEventListener("contextmenu", showContextMenu); // Right-click
        document.addEventListener("click", hideContextMenu); // Hide menu on left-click
    </script>

  
  </body>
</html>